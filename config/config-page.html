<!DOCTYPE html>
<html>
<head>
  <link rel='stylesheet' type='text/css' href='css/slate.min.css'>
  <script src='js/slate.min.js'></script>

  <script>
    // Get query variables
    function getQueryParam(variable, defaultValue) {
      // Find all URL parameters
      var query = location.search.substring(1);
      var vars = query.split('&');
      for (var i = 0; i < vars.length; i++) {
	var pair = vars[i].split('=');

	// If the query variable parameter is found, decode it to use and return it for use
	if (pair[0] === variable) {
	  return decodeURIComponent(pair[1]);
	}
      }
      return defaultValue || false;
    }
  </script>
  
  <style>
    .title {
      padding: 15px 10px;
      text-transform: uppercase;
      font-family: 'PT Sans', sans-serif;
      font-size: 1.2em;
      font-weight: 500;
      color: #888888;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1 class='title'>Miner statistics Configuration</h1>

    <div class='item-container'>
      <div class='item-container-header'>Bitcoin address</div>
      <div class='item-container-content'>
        <label class='item'>
	  <div class="item-input-wrapper">
	    <input id='txtBitcoin' type='text' class='item-input' placeholder='The bitcoin address to use' />
	   </div>
        </label>
      </div>
      <div class='item-container-footer'>
        The Nicehash API works based on a specific bitcoin address.
      </div>
    </div>  


    <div class='item-container'>
      <div class='button-container'>
        <input id='submit_button' type='button' class='item-button' value=' SAVE '>
      </div>
    </div>
    
  <script>
    var submitButton = document.getElementById('submit_button');
    submitButton.addEventListener('click', function() {
      var config = {
	'bitcoinaddr': document.getElementById('txtBitcoin').value
      };

      // Return data to watchapp
      var return_to = getQueryParam('return_to', 'pebblejs://close#');
      document.location = return_to + encodeURIComponent(JSON.stringify(config));
    });
  </script>
</body>